(function(){var a,i,k,h,j,e,f,g,c;if(typeof require!="undefined"&&require!==null){a=require("react")}else{a=this.React}Array.prototype.map=function(o){var p,n,l,m=[];for(p=0,n=this.length;p<n;++p){l=this[p];m.push(o(l))}return m};Array.prototype.map_=function(n){var o,m,l;for(o=0,m=this.length;o<m;++o){l=this[o];n(l)}};i={"box-shadow":"0 0 0 1px #f00"};k={};h={"box-shadow":"0 0 0 1px #f0f"};j={};e=a.createClass({componentDidMount:function(){var l;l=$(this.getDOMNode());this.props.d.willIn(l.height());return l.css(d(d({position:"absolute",opacity:0},this.props.d.stylesMoving),this.props.transite)).velocity({opacity:1},this.props.d.config.duration,this.props.d.config.easing)},componentWillUnmount:function(){var l,m;l=$(this.getDOMNode());this.props.d.willOut(l.height());m=l.clone().css(this.props.d.stylesRemoving).velocity({opacity:0},this.props.d.config.duration,this.props.d.config.easing,function(){return $(this).remove()});return $(this.props.d.portal).append(m)},componentWillReceiveProps:function(l){if(l.prev){return $(this.getDOMNode()).css(l.prev)}},componentDidUpdate:function(){var l=this;this.props.d.animStart();return $(this.getDOMNode()).velocity(this.props.transite,this.props.d.config.duration,this.props.d.config.easing,function(){return l.props.d.animEnd()})},render:function(){return a.DOM.div({},this.props.children)}});f=a.createClass({componentDidMount:function(){},render:function(){var l=this;return a.createElement("div",{className:"anicoll-floatings"},Array.prototype.slice.apply(this.props.children).sort(function(n,m){return n.key<m.key&&-1||(n.key>m.key&&1||0)}).map(function(m){return a.createElement(e,{key:m.key,ref:m.key,transite:l.props.positions[m.key],prev:l.props.prevPositions[m.key],d:l.props.d},a.cloneElement(m,{key:"c"}))}))}});g=a.createClass({getInitialState:function(){var l;l=function(m){return this(m).clone()};this.config={easing:function(n,o,m,q,p){return -q*(o/=p)*(o-2)+m},duration:350,debug:false};return{animating:false}},componentDidMount:function(){var l;$(this.getDOMNode()).css({opacity:1});l=(this.portalNode=document.createElement("div")).style;l.left=0;l.top=0;l.opacity=0;l.position="absolute";document.body.appendChild(this.portalNode);return this.renderClones({positions:this.getPositions(),children:this.props.children})},componentWillUnmount:function(){return document.body.removeChild(this.portalNode)},componentWillReceiveProps:function(l){var m=this;if(l.config){["duration","easing","debug"].map_(function(n){if(l.config[n]!=null){m.config[n]=l.config[n]}})}return this.prepareAnimation()},componentDidUpdate:function(l){return this.startAnimation()},showClones:function(l){$(this.getDOMNode()).css({opacity:!l&&1||0});return $(this.portalNode).css({opacity:l&&1||0,"z-index":l&&10||-10})},prepareAnimation:function(){return this.prev=this.getPositions()},startAnimation:function(){var n,m,l=this;this.startedAnims=0;this.renderClones({positions:this.getPositions(),prevPositions:this.prev,children:this.props.children},function(){return l.showClones(true)});if(this.heightDiff!==0){n=$(this.getDOMNode());m=n.height();if(this.heightDiff<0){return n.css({"min-height":m}).velocity({"min-height":m+this.heightDiff},this.config.duration,this.config.easing,function(){return $(this).css({"min-height":""})})}else{return n.css({"max-height":m}).velocity({"max-height":m+this.heightDiff},this.config.duration,this.config.easing,function(){return $(this).css({"max-height":""})})}}},finishAnimation:function(){return this.showClones(false)},getPositions:function(){var l,s,n,o,r,q,p,m;l={};for(s=0,o=(n=this.props.children).length;s<o;++s){r=n[s].key;q=this.refs[r].getDOMNode();p=q.getBoundingClientRect();m=getComputedStyle(q);l[r]={top:p.top-parseInt(m.marginTop,10),left:p.left-parseInt(m.marginLeft,10),width:p.width,height:p.height}}return l},animEnd:function(){if(--this.startedAnims===0){return this.finishAnimation()}},renderClones:function(n,l){var m=this;this.startedAnims=1;this.heightDiff=0;return a.render(a.createElement(f,d(d({key:"clones",d:{animStart:function(){++m.startedAnims},animEnd:function(){m.animEnd()},portal:this.portalNode,willIn:function(o){m.heightDiff+=o},willOut:function(o){m.heightDiff-=o},config:this.config,stylesMoving:this.config.debug&&i||k,stylesRemoving:this.config.debug&&h||j}},n),this.props)),this.portalNode,function(){if(typeof l=="function"){l()}m.animEnd()})},render:function(){return a.DOM.div({},this.props.children.map(function(l){return a.createElement("div",{key:l.key,ref:l.key},l)}))}});if(typeof c!=null){if(typeof module!=null&&module.exports){c=module.exports=g}c.Anicoll=g}else{this.Anicoll=g}if(b(typeof define,"function","===")&&define.amd){define("Anicoll",[],function(){return g})}function d(n,o){var l={}.hasOwnProperty;for(var m in o){if(l.call(o,m)){n[m]=o[m]}}return n}function b(m,s,o){var q={}.toString,p={}.hasOwnProperty,n=function(u,t){return p.call(u,t)};var r=true;return l(m,s,[]);function l(C,z,A){var y,v,E,F,B,x,t,D,w,u;if(C==null||z==null){return C===z}if(C.__placeholder__||z.__placeholder__){return true}if(C===z){return C!==0||1/C==1/z}y=q.call(C);if(q.call(z)!=y){return false}switch(y){case"[object String]":return C==String(z);case"[object Number]":return C!=+C?z!=+z:(C==0?1/C==1/z:C==+z);case"[object Date]":case"[object Boolean]":return +C==+z;case"[object RegExp]":return C.source==z.source&&C.global==z.global&&C.multiline==z.multiline&&C.ignoreCase==z.ignoreCase}if(typeof C!="object"||typeof z!="object"){return false}v=A.length;while(v--){if(A[v]==C){return true}}A.push(C);E=0;F=true;if(y=="[object Array]"){B=C.length;x=z.length;if(r){switch(o){case"===":F=B===x;break;case"<==":F=B<=x;break;case"<<=":F=B<x;break}E=B;r=false}else{F=B===x;E=B}if(F){while(E--){if(!(F=E in C==E in z&&l(C[E],z[E],A))){break}}}}else{if("constructor" in C!="constructor" in z||C.constructor!=z.constructor){return false}for(D in C){if(n(C,D)){E++;if(!(F=n(z,D)&&l(C[D],z[D],A))){break}}}if(F){u=0;for(D in z){if(n(z,D)){++u}}if(r){if(o==="<<="){F=E<u}else{if(o==="<=="){F=E<=u}else{F=E===u}}}else{r=false;F=E===u}}}A.pop();return F}}}).call(this);